<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedbackly SDK Example</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .demo-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e1e5e9;
            border-radius: 8px;
            background: #f8f9fa;
        }
        
        .demo-section h2 {
            margin-top: 0;
            color: #495057;
        }
        
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: background 0.2s ease;
        }
        
        button:hover {
            background: #0056b3;
        }
        
        button.secondary {
            background: #6c757d;
        }
        
        button.secondary:hover {
            background: #545b62;
        }
        
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸš€ Feedbackly SDK Demo</h1>
        
        <div class="demo-section">
            <h2>Basic Usage</h2>
            <p>Click the feedback button in the bottom-right corner to test the widget.</p>
            <div class="code-block">
// Initialize Feedbackly
const feedbackly = new Feedbackly({
    apiKey: 'your-api-key',
    websiteId: 'your-website-id',
    theme: {
        primaryColor: '#007bff',
        backgroundColor: '#ffffff'
    }
});

// Initialize and show widget
feedbackly.init().show();
            </div>
        </div>
        
        <div class="demo-section">
            <h2>Widget Controls</h2>
            <button onclick="showWidget()">Show Widget</button>
            <button onclick="hideWidget()">Hide Widget</button>
            <button onclick="toggleWidget()">Toggle Widget</button>
            <button onclick="destroyWidget()" class="secondary">Destroy Widget</button>
        </div>
        
        <div class="demo-section">
            <h2>User Management</h2>
            <button onclick="setUser()">Set User Info</button>
            <button onclick="trackEvent()">Track Custom Event</button>
            <div id="user-status" class="status" style="display: none;"></div>
        </div>
        
        <div class="demo-section">
            <h2>Configuration</h2>
            <button onclick="updateTheme()">Update Theme</button>
            <button onclick="updatePosition()">Update Position</button>
            <button onclick="showConfig()">Show Current Config</button>
            <div id="config-display" class="code-block" style="display: none;"></div>
        </div>
        
        <div class="demo-section">
            <h2>Advanced Features</h2>
            <button onclick="submitProgrammatic()">Submit Feedback Programmatically</button>
            <button onclick="testErrorHandling()">Test Error Handling</button>
            <div id="advanced-status" class="status" style="display: none;"></div>
        </div>
    </div>

    <script>
        // Initialize Feedbackly with demo configuration
        let feedbackly;
        
        function initFeedbackly() {
            feedbackly = new Feedbackly({
                apiKey: 'demo-api-key',
                websiteId: 'demo-website-id',
                theme: {
                    primaryColor: '#007bff',
                    backgroundColor: '#ffffff',
                    textColor: '#333333',
                    borderRadius: '8px'
                },
                position: {
                    bottom: '20px',
                    right: '20px'
                },
                text: {
                    title: 'Share Your Feedback',
                    ratingLabel: 'How would you rate your experience?',
                    feedbackLabel: 'Tell us more (optional)',
                    submitButton: 'Submit Feedback'
                },
                categories: [
                    { value: 'bug', label: 'Bug Report' },
                    { value: 'feature', label: 'Feature Request' },
                    { value: 'general', label: 'General Feedback' }
                ]
            });
            
            feedbackly.init();
        }
        
        // Widget control functions
        function showWidget() {
            if (feedbackly) {
                feedbackly.show();
            }
        }
        
        function hideWidget() {
            if (feedbackly) {
                feedbackly.hide();
            }
        }
        
        function toggleWidget() {
            if (feedbackly) {
                feedbackly.toggle();
            }
        }
        
        function destroyWidget() {
            if (feedbackly) {
                feedbackly.destroy();
                feedbackly = null;
            }
        }
        
        // User management functions
        function setUser() {
            if (feedbackly) {
                feedbackly.setUser({
                    id: 'demo-user-123',
                    email: 'demo@example.com',
                    name: 'Demo User'
                });
                
                showStatus('user-status', 'User info set successfully!', 'success');
            }
        }
        
        function trackEvent() {
            if (feedbackly) {
                feedbackly.track('demo_event', {
                    page: 'demo-page',
                    action: 'button_click'
                });
                
                showStatus('user-status', 'Custom event tracked!', 'success');
            }
        }
        
        // Configuration functions
        function updateTheme() {
            if (feedbackly) {
                feedbackly.updateConfig({
                    theme: {
                        primaryColor: '#28a745',
                        backgroundColor: '#f8f9fa'
                    }
                });
                
                showStatus('user-status', 'Theme updated!', 'success');
            }
        }
        
        function updatePosition() {
            if (feedbackly) {
                feedbackly.updateConfig({
                    position: {
                        bottom: '50px',
                        right: '50px'
                    }
                });
                
                showStatus('user-status', 'Position updated!', 'success');
            }
        }
        
        function showConfig() {
            if (feedbackly) {
                const config = feedbackly.getConfig();
                const configDisplay = document.getElementById('config-display');
                configDisplay.textContent = JSON.stringify(config, null, 2);
                configDisplay.style.display = 'block';
            }
        }
        
        // Advanced functions
        function submitProgrammatic() {
            if (feedbackly) {
                feedbackly.submitFeedback({
                    rating: 5,
                    feedback: 'This is programmatically submitted feedback!',
                    category: 'general'
                }).then(() => {
                    showStatus('advanced-status', 'Feedback submitted successfully!', 'success');
                }).catch((error) => {
                    showStatus('advanced-status', 'Failed to submit feedback: ' + error.message, 'error');
                });
            }
        }
        
        function testErrorHandling() {
            if (feedbackly) {
                // Simulate API error by using invalid config
                const originalApiKey = feedbackly.config.apiKey;
                feedbackly.updateConfig({ apiKey: 'invalid-key' });
                
                feedbackly.submitFeedback({
                    rating: 3,
                    text: 'This should fail'
                }).then(() => {
                    showStatus('advanced-status', 'Unexpected success', 'error');
                }).catch((error) => {
                    showStatus('advanced-status', 'Error handled correctly: ' + error.message, 'success');
                }).finally(() => {
                    // Restore original config
                    feedbackly.updateConfig({ apiKey: originalApiKey });
                });
            }
        }
        
        // Utility function to show status messages
        function showStatus(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `status ${type}`;
            element.style.display = 'block';
            
            setTimeout(() => {
                element.style.display = 'none';
            }, 3000);
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initFeedbackly);
    </script>
</body>
</html>

